<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./jv-datepicker.html">
<!-- <link rel="import" href="../paper-dialog/paper-dialog.html"> -->
<link rel="import" href="../neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../neon-animation/neon-animations.html">
<link rel="import" href="../paper-dialog-behavior/paper-dialog-behavior.html">

<dom-module id="jv-datepicker-dialog">
  <style>
    :host {
      display: block;
      position: absolute;
      height: calc(100vh - 32px);
      width: calc(100vw - 64px);
      background: var(--paper-dialog-background-color, --primary-background-color);
      color: var(--paper-dialog-color, --primary-text-color);

      @apply(--shadow-elevation-16dp);
    }

    /* N7 2013 Portrait and 800px PC potrait */
    @media all and (min-width: 600px) and (min-height: 600px) and (orientation: portrait) {
      :host {
        width: 360px;
        height: calc(100vh / 1.5);
        max-height: 640px;
      }
    }

    /* N7 2013 landscape and 800px PC landscape */
    @media all and (min-width: 800px) and (orientation: landscape) {
      :host {
        width: calc(100vw / 1.5);
        max-width: 640px;
        height: 360px;
      }
    }
  </style>

  <template>
    <jv-datepicker start-day="{{startDay}}" disable-days="{{disableDays}}" format="{{format}}" bind-date="{{bindDate}}"></jv-datepicker>
    <span>{{startDay}}</span>
  </template>
  <script>
  (function() {
    Polymer({
      is: 'jv-datepicker-dialog',

      properties: {
        startDay: Number,
        disableDays: Array,
        format: String,
        bindDate: String
      },

      behaviors: [
        Polymer.PaperDialogBehavior,
        Polymer.NeonAnimationRunnerBehavior
      ],

      listeners: {
        'neon-animation-finish': '_onNeonAnimationFinish'
      },
      _renderOpened: function() {
        if (this.withBackdrop) {
          this.backdropElement.open();
        }
        this.playAnimation('entry');
      },
      _renderClosed: function() {
        if (this.withBackdrop) {
          this.backdropElement.close();
        }
        this.playAnimation('exit');
      },
      _onNeonAnimationFinish: function() {
        if (this.opened) {
          this._finishRenderOpened();
        } else {
          this._finishRenderClosed();
        }
      }
    });
  })();
  </script>
</dom-module>
